<div id="head" ng-show="ready">

</div>

<div id="main" class="table-responsive" ng-show="ready">

	<table class="table table-hover table-striped">

		<tr>

			<th ng-repeat="col in columns">

				<a title="click to sort by&#13;this column" ng-click="sortBy(col)" ng-bind="col"></a>

			</th>

			<th></th>

		</tr>

		<tr ng-repeat="obj in data | orderBy:user.control.sort">

			<td>

				<input class="form-control "type="text" ng-change="userEdit()" ng-model="obj.name"/>

			</td>

			<td class="col-md-1">

				<input class="form-control" type="text" ng-change="userEdit()" ng-model="obj.device"/>

			</td>

			<td class="col-md-1">

				<input class="form-control" type="text" ng-change="userEdit()" ng-model="obj.point"/>

			</td>
			
			<td>

				<select class="form-control" ng-model="obj.type" ng-change="userEdit()" ng-options="opt.val as opt.text for opt in options.type"></select>

			</td>

			<td ng-if="obj.type == 2"></td>

			<td ng-if="obj.type == 2"></td>

			<td ng-if="obj.type < 2">

				<button type="button" class="btn btn-primary" ng-click="set(obj,'off')">Off</button>

				<button type="button" class="btn btn-info" ng-click="set(obj,'on')">On</button>

			</td>

			<td ng-if="obj.type == 0"></td>

			<td ng-if="obj.type == 0"></td>

			<td ng-if="obj.type == 1" class="col-md-1">

				<input class="form-control" type="range" min="0" max="99" ng-change="obj.value=obj.level" ng-model="obj.level" ng-focus="focus()" ng-blur="blur()" ng-mouseup="set(obj,'level')"/>

			</td>

			<td ng-if="obj.type > 0" class="col-md-1">

				<input class="form-control" type="text" ng-model="obj.value" ng-focus="focus()" ng-blur="blur()" ng-keyup="$event.keyCode == 13 && set(obj,'value')"/>

			</td>
	

			<td ng-bind="obj.timestamp + '000' | date:'EEE, d MMM yyyy HH:mm:ss'"></td>

			<td>

				<button type="button" class="btn btn-success" ng-click="save(obj)">Save</button>

				<button type="button" class="btn btn-danger" ng-click="delete(obj)">Delete</button>

			</td>

		</tr>

	</table>

	<button type="button" class="btn btn-warning" ng-click="add()">Add</button>

</div>